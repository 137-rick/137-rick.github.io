I"×z<div id="sina_keyword_ad_area2" class="articalContent   ">
  phpçš„libevæ‰©å±•<br />æä¾›äº†ä¸€äº›ç±»ä¼¼nodejså¼‚æ­¥è°ƒç”¨çš„æ–¹å¼ï¼Œ<br />ç”¨é€”å¾ˆå¤šï¼Œå¦‚æ–‡ä»¶çŠ¶æ€ç›‘è§†ï¼Œæµé˜»å¡ç­‰å¾…å¼‚æ­¥<br />peclåº“çš„ï¼Œé»˜è®¤ä¸å®‰è£…ï¼Œéœ€è¦è‡ªå·±åœ¨peclä¸‹å¼„ä¸ªè¿‡æ¥<br />php manualåœ°å€ï¼šhttp://www.php.net/manual/zh/ev.examples.php<br />å¦‚æœä¸çŸ¥é“libevæ˜¯å•¥å¯ä»¥çœ‹è¿™ä¸ªhttp://dirlt.com/libev.html<br />è¿™é‡Œç½—åˆ—ä¸‹å…·ä½“æ‰‹å†Œå†…çš„ä»£ç ï¼Œåªç¿»è¯‘äº†å…³é”®æ³¨é‡Š<br />åˆšæ‰ç”±äºå¯¹ä»£ç æ²¡æœ‰æ•´ç†ï¼Œç«Ÿç„¶è¢«è¿‡æ»¤æ‰äº†â€¦â€¦ä¸èƒ½å‘html preä»£ç çš„åšå®¢ç¼–è¾‘å™¨å¥½å‡„æƒ¨&lt;/p&gt; 
  
  <p>
    <code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #FF8000"&gt;//åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œ2ç§’åå¯åŠ¨ï¼Œä¸å¾ªç¯åªæ‰§è¡Œä¸€æ¬¡&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w1 &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvTimer&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;2&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;0&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function () {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"2 seconds elapsed\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œ2ç§’åå¯åŠ¨ï¼Œ1ç§’æ‰§è¡Œä¸€æ¬¡&lt;br /&gt;// ç›´åˆ°ç¢°åˆ°æŒ‡å®šä»£ç åœæ­¢&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w2 &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvTimer&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;2&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;1&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"is called every second, is launched after 2 seconds\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"iteration = "&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;iteration&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(), &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;PHP_EOL&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//æ‰§è¡Œç¬¬äº”æ¬¡åœæ­¢&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;iteration&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;() == &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;5 &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;and &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;// Stop the watcher if further calls cause more than 10 iterations&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;iteration&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;() &gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;10 &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;and &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//åˆ›å»ºè®¡æ—¶å™¨ï¼Œæœªæ¿€æ´»ï¼Œéœ€è¦ä»£ç æ¿€æ´»&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w_stopped &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvTimer&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;createStopped&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;10&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;5&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Callback of a timer created as stopped\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//äº‹ä»¶äº§ç”Ÿä¸¤æ¬¡ååœæ­¢å®šæ—¶å™¨&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;iteration&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;() &gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;2 &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;and &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//å¾ªç¯ç›´åˆ°æ‰€æœ‰éƒ½å…³é—­&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//å¯åŠ¨å¹¶æ£€æŸ¥æ˜¯å¦å¼€å§‹å·¥ä½œ&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w_stopped&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;start&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Run single iteration\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;RUN_ONCE&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"é‡å¯å®šæ—¶å™¨ï¼Œå¹¶å°è¯•ç»§ç»­å¤„ç†ç›¸åŒäº‹ä»¶ï¼Œä½†æ˜¯è¿™æ¬¡æ˜¯éé˜»å¡çš„æ–¹å¼\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w2&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;again&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;RUN_NOWAIT&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvTimer&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;10&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;0&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function() {});&lt;br /&gt;echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"é˜»å¡æ–¹å¼è¿è¡Œ\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"END\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;/span&gt;&lt;/span&gt;</code>
  </p>
  
  <p>
    ========================<br /><code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #FF8000"&gt;//ç­‰å¾…ä¸€ç›´åˆ°STDINå‡†å¤‡å¥½å¹¶å¯è¯»&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvIo&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;STDIN&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;READ&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$watcher&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$revents&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"STDIN is readable\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;RUN_ONCE&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/span&gt;&lt;/span&gt;</code>
  </p>
  
  <p>
    ========================<br />éé˜»å¡<br /><code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #0000BB"&gt;$e_nonblocking &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= array (&lt;/span&gt;&lt;span STYLE="
color: #0000BB"&gt;11&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;115&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt; &lt;span STYLE="color: #FF8000"&gt;//è·å–wwwæœåŠ¡æœåŠ¡ç«¯å£&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$service_port &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;getservbyname&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'www'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'tcp'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//è·å–åŸŸåå¯¹åº”ip&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$address &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;gethostbyname&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'google.co.uk'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//åˆ›å»ºsocketé€šè®¯&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_create&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;AF_INET&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;SOCK_STREAM&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;SOL_TCP&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;if (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;=== &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;FALSE&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"socket_create() failed: reason: "&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;.&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_strerror&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_last_error&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;()) . &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;}&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//è¡¨ç¤ºéé˜»å¡æ–¹å¼&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_set_nonblock&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//å¦‚æœåœ¨ä½¿ç”¨ä¸­è¶…æ—¶è‡ªåŠ¨å…³é—­ï¼Œè¿™é‡Œç”¨äº†evtimer&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$timeout_watcher &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvTimer&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;10.0&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;0.&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function () use (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_close&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;BREAK_ALL&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//å½“socketå¯ç”¨åï¼Œè¿›è¡Œå‘é€æ¥æ”¶æ“ä½œ&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$write_watcher &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvIo&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;WRITE&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;)&lt;br /&gt;    use (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$timeout_watcher&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$e_nonblocking&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;)&lt;br /&gt;{&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//è¶…æ—¶timeråœç”¨&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$timeout_watcher&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//åœç”¨evioç›‘è§†&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"HEAD / HTTP/1.1\r\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;.= &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Host: google.co.uk\r\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;.= &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Connection: Close\r\n\r\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;/p&gt;
&lt;p&gt;    if (!&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_write&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;strlen&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;))) {&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;trigger_error&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Failed writing &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$in&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt; to socket"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;E_USER_ERROR&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;    }&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$read_watcher &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvIo&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;READ&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$re&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;)&lt;br /&gt;        use (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$e_nonblocking&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;)&lt;br /&gt;    {&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//éé˜»å¡æƒ…å†µä¸‹ä»socketè¯»å–20å­—èŠ‚æ•°æ®&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$ret &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_recv&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$out&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;20&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;MSG_DONTWAIT&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;        if (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$ret&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;            echo &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$out&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;        } elseif (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$ret &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;=== &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;0&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;            &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//è¯»å–å®Œæ¯•&lt;br /&gt;            &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;            &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_close&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;            return;&lt;br /&gt;        }&lt;br /
&gt;&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//socketé€šè®¯é”™è¯¯&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;if (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;in_array&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_last_error&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(), &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$e_nonblocking&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;)) {&lt;br /&gt;            return;&lt;br /&gt;        }&lt;/p&gt;
&lt;p&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_close&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;    });&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$result &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;socket_connect&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$socket&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$address&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$service_port&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/span&gt;&lt;/span&gt;</code>
  </p>
  
  <p>
    ===========================<br />ä¿¡å·å¤„ç†ï¼Œå½“æ”¶åˆ°æ§åˆ¶ä¿¡å·æ—¶è‡ªåŠ¨å¯åŠ¨<br /><code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #0000BB"&gt;$w &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvSignal&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;SIGTERM&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$watcher&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"SIGTERM received\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$watcher&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/span&gt;&lt;/span&gt;</code>
  </p>
  
  <p>
    ===========================<br /><code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #FF8000"&gt;//æŒ‡å®šæ–‡ä»¶ä¿®æ”¹ç›‘è§†å½“ç›‘è§†æ–‡ä»¶å‡ºç°å˜åŒ–ï¼Œåˆ™è§¦å‘ï¼Œæ¯8ç§’æ£€æŸ¥ä¸€æ¬¡&lt;br /&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvStat&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"/var/log/messages"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;8&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    echo &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"/var/log/messages changed\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;;&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$attr &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;attr&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;    if (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$attr&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;[&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'nlink'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;]) {&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;printf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Current size: %ld\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$attr&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;[&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'size'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;]);&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;printf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Current atime: %ld\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$attr&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;[&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'atime'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;]);&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;printf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Current mtime: %ld\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$attr&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;[&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;'mtime'&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;]);&lt;br /&gt;    } else {&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;fprintf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;STDERR&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"`messages` file is not there!"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;br /&gt;    }&lt;br /&gt;});&lt;/p&gt;
&lt;p&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/span&gt;&lt;/span&gt;</code>
  </p>
  
  <p>
    ============================<br />è¿›ç¨‹çŠ¶æ€ç›‘è§†<br /><code>&lt;span STYLE="color: #000000"&gt;&lt;span STYLE="color: #0000BB"&gt;$pid &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;pcntl_fork&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;if (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$pid &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;== -&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;1&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;fprintf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;STDERR&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"pcntl_fork failed\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;} elseif (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$pid&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;= new &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;EvChild&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$pid&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;FALSE&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, function (&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$revents&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;) {&lt;br /&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;stop&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;        &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;printf&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #DD0000"&gt;"Process %d exited with status %d\n"&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;rpid&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;, &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$w&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;-&gt;&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;rstatus&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;    });&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;Ev&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;::&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;run&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;();&lt;/p&gt;
&lt;p&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;// Protect against Zombies&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;pcntl_wait&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;$status&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;} else {&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #FF8000"&gt;//Forked child&lt;br /&gt;    &lt;/span&gt;&lt;span STYLE="color: #007700"&gt;exit(&lt;/span&gt;&lt;span STYLE="color: #0000BB"&gt;2&lt;/span&gt;&lt;span STYLE="color: #007700"&gt;);&lt;br /&gt;}&lt;/span&gt;&lt;/span&gt;</code>
  </p>
</div>
:ET