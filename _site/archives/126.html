<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>[转载]linux sed命令 | 徐艺洲</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="[转载]linux sed命令" />
<meta name="author" content="徐艺洲" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="好东西窃走了！~&lt;/p&gt; 原文地址：linux sed命令作者：水境之 [root@linux ~]# sed [-nefr] [动作]参数&#8758;-n &#8758;使用安静(silent)模式。在一般 sed的用法中，所有来自 STDIN 的资料一般都会被列出到萤幕上。但如果加上 -n 参数后，则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。-e &#8758;直接在指令列模式上进行 sed 的动作编辑；-f &#8758;直接将 sed 的动作写在一个档案内， -f filename 则可以执行filename 内的 sed 动作；-r &#8758;sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)-i &#8758;直接修改读取的档案内容，而不是由萤幕输出。 动作说明&#8758; [n1[,n2]]functionn1, n2 &#8758;不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作 是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』 function 有底下这些咚咚&#8758;a &#8758;新增， a的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～c &#8758;取代， c 的后面可以接字串，这些字串可以取代n1,n2 之间的行！d &#8758;删除，因为是删除啊，所以 d后面通常不接任何咚咚；i &#8758;插入， i的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；p &#8758;列印，亦即将某个选择的资料印出。通常 p 会与参数sed -n 一起运作～s &#8758;取代，可以直接进行取代的工作哩！通常这个 s的动作可以搭配 正规表示法！例如 1,20s/old/new/g 就是啦！范例&#8758; 范例一&#8758;将 /etc/passwd 的内容列出，并且我需要列印行号，同时，请将第 2~5 行删除！[root@linux ~]# nl /etc/passwd | sed &#8216;2,5d&#8217; 1 root:x:0:0:root:/root:/bin/bash 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown&#8230;..(后面省略)&#8230;..# 看到了吧？因为 2-5 行给他删除了，所以显示的资料中，就没有 2-5行棉～# 另外，注意一下，原本应该是要下达 sed -e 才对，没有 -e 也行啦！# 同时也要注意的是， sed 后面接的动作，请务必以 &#8221; 两个单引号括住喔！# 而，如果只要删除第 2 行，可以使用 nl /etc/passwd | sed &#8216;2d&#8217; 来达成，# 至于第 3 到最后一行，则是 nl /etc/passwd | sed &#8216;3,$d&#8217; 的啦！ 范例二&#8758;承上题，在第二行后(亦即是加在第三行)加上『drink tea?』字样！[root@linux ~]# nl /etc/passwd | sed &#8216;2a drink tea&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologindrink tea 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 嘿嘿！在 a后面加上的字串就已将出现在第二行后面棉！那如果是要在第二行前呢？# nl /etc/passwd | sed &#8216;2i drink tea&#8217; 就对啦！ 范例三&#8758;在第二行后面加入两行字，例如『Drink tea or &#8230;..』『drink beer?』[root@linux ~]# nl /etc/passwd | sed &#8216;2a Drink tea or &#8230;&#8230;&gt; drink beer ?&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologinDrink tea or &#8230;&#8230;drink beer ? 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 这个范例的重点是，我们可以新增不只一行喔！可以新增好几行～# 但是每一行之间都必须要以反斜线 来进行新行的增加喔！所以，上面的例子中，# 我们可以发现在第一行的最后面就有 存在啦！那是一定要的喔！ 范例四&#8758;我想将第2-5行的内容取代成为『No 2-5 number』呢？[root@linux ~]# nl /etc/passwd | sed &#8216;2,5c No 2-5 number&#8217; 1 root:x:0:0:root:/root:/bin/bashNo 2-5 number 6 sync:x:5:0:sync:/sbin:/bin/sync# 没有了 2-5 行，嘿嘿嘿嘿！我们要的资料就出现啦！ 范例五&#8758;仅列出第 5-7 行[root@linux ~]# nl /etc/passwd | sed -n &#8216;5,7p&#8217; 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown# 为什么要加 -n 的参数呢？您可以自行下达 sed &#8216;5,7p&#8217;就知道了！(5-7行会重复输出)# 有没有加上 -n 的参数时，输出的资料可是差很多的喔！ 范例六&#8758;我们可以使用 ifconfig 来列出 IP ，若仅要 eth0 的 IP 时？[root@linux ~]# ifconfig eth0eth0 Link encap:Ethernet HWaddr00:51:FD:52:9A:CA inet addr:192.168.1.12 Bcast:192.168.1.255 Mask:255.255.255.0 inet6 addr: fe80::250:fcff:fe22:9acb/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1&#8230;..(以下省略)&#8230;..# 其实，我们要的只是那个 inet addr:..那一行而已，所以棉，利用 grep 与sed 来捉[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/Bcast.*$//g&#8217;[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/ Bcast.*$//g&#8217;#这两行命令差不多，但是第二行在Bacst前有个空格，一定要注意，说明连空格在内都去除了，可以使用#上面两行命令重向到两个文本文件中，例如1.txt 2.txt 仔细查看这两个文件的大小# 您可以将每个管线 (|) 的过程都分开来执行，就会晓得原因棉！# 去头去尾之后，就会得到我们所需要的 IP 亦即是 192.168.1.12 棉～ 范例七&#8758;将 /etc/man.config 档案的内容中，有 MAN 的设定就取出来，但不要说明内容。[root@linux ~]# cat /etc/man.config | grep &#8216;MAN&#8217;| sed &#8216;s/#.*$//g&#8217;|sed &#8216;/^$/d&#8217;# 每一行当中，若有 # 表示该行为注解，但是要注意的是，有时候，# 注解并不是写在第一个字元，亦即是写在某个指令后方，如底下的模样&#8758;# 『shutdown -h now # 这个是关机的指令』，注解 # 就在指令的后方了。# 因此，我们才会使用到将 #.*$ 这个正规表示法！ 范例八&#8758;利用 sed 直接在 ~/.bashrc 最后一行加入『# This is a test』[root@linux ~]# sed -i &#8216;$a # This is a test&#8217; ~/.bashrc# 上头的 -i 参数可以让你的 sed直接去修改后面接的档案内容喔！而不是由萤幕输出。# 至于那个 $a 则代表最后一行才新增的意思。 &lt;/p&gt;" />
<meta property="og:description" content="好东西窃走了！~&lt;/p&gt; 原文地址：linux sed命令作者：水境之 [root@linux ~]# sed [-nefr] [动作]参数&#8758;-n &#8758;使用安静(silent)模式。在一般 sed的用法中，所有来自 STDIN 的资料一般都会被列出到萤幕上。但如果加上 -n 参数后，则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。-e &#8758;直接在指令列模式上进行 sed 的动作编辑；-f &#8758;直接将 sed 的动作写在一个档案内， -f filename 则可以执行filename 内的 sed 动作；-r &#8758;sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)-i &#8758;直接修改读取的档案内容，而不是由萤幕输出。 动作说明&#8758; [n1[,n2]]functionn1, n2 &#8758;不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作 是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』 function 有底下这些咚咚&#8758;a &#8758;新增， a的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～c &#8758;取代， c 的后面可以接字串，这些字串可以取代n1,n2 之间的行！d &#8758;删除，因为是删除啊，所以 d后面通常不接任何咚咚；i &#8758;插入， i的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；p &#8758;列印，亦即将某个选择的资料印出。通常 p 会与参数sed -n 一起运作～s &#8758;取代，可以直接进行取代的工作哩！通常这个 s的动作可以搭配 正规表示法！例如 1,20s/old/new/g 就是啦！范例&#8758; 范例一&#8758;将 /etc/passwd 的内容列出，并且我需要列印行号，同时，请将第 2~5 行删除！[root@linux ~]# nl /etc/passwd | sed &#8216;2,5d&#8217; 1 root:x:0:0:root:/root:/bin/bash 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown&#8230;..(后面省略)&#8230;..# 看到了吧？因为 2-5 行给他删除了，所以显示的资料中，就没有 2-5行棉～# 另外，注意一下，原本应该是要下达 sed -e 才对，没有 -e 也行啦！# 同时也要注意的是， sed 后面接的动作，请务必以 &#8221; 两个单引号括住喔！# 而，如果只要删除第 2 行，可以使用 nl /etc/passwd | sed &#8216;2d&#8217; 来达成，# 至于第 3 到最后一行，则是 nl /etc/passwd | sed &#8216;3,$d&#8217; 的啦！ 范例二&#8758;承上题，在第二行后(亦即是加在第三行)加上『drink tea?』字样！[root@linux ~]# nl /etc/passwd | sed &#8216;2a drink tea&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologindrink tea 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 嘿嘿！在 a后面加上的字串就已将出现在第二行后面棉！那如果是要在第二行前呢？# nl /etc/passwd | sed &#8216;2i drink tea&#8217; 就对啦！ 范例三&#8758;在第二行后面加入两行字，例如『Drink tea or &#8230;..』『drink beer?』[root@linux ~]# nl /etc/passwd | sed &#8216;2a Drink tea or &#8230;&#8230;&gt; drink beer ?&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologinDrink tea or &#8230;&#8230;drink beer ? 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 这个范例的重点是，我们可以新增不只一行喔！可以新增好几行～# 但是每一行之间都必须要以反斜线 来进行新行的增加喔！所以，上面的例子中，# 我们可以发现在第一行的最后面就有 存在啦！那是一定要的喔！ 范例四&#8758;我想将第2-5行的内容取代成为『No 2-5 number』呢？[root@linux ~]# nl /etc/passwd | sed &#8216;2,5c No 2-5 number&#8217; 1 root:x:0:0:root:/root:/bin/bashNo 2-5 number 6 sync:x:5:0:sync:/sbin:/bin/sync# 没有了 2-5 行，嘿嘿嘿嘿！我们要的资料就出现啦！ 范例五&#8758;仅列出第 5-7 行[root@linux ~]# nl /etc/passwd | sed -n &#8216;5,7p&#8217; 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown# 为什么要加 -n 的参数呢？您可以自行下达 sed &#8216;5,7p&#8217;就知道了！(5-7行会重复输出)# 有没有加上 -n 的参数时，输出的资料可是差很多的喔！ 范例六&#8758;我们可以使用 ifconfig 来列出 IP ，若仅要 eth0 的 IP 时？[root@linux ~]# ifconfig eth0eth0 Link encap:Ethernet HWaddr00:51:FD:52:9A:CA inet addr:192.168.1.12 Bcast:192.168.1.255 Mask:255.255.255.0 inet6 addr: fe80::250:fcff:fe22:9acb/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1&#8230;..(以下省略)&#8230;..# 其实，我们要的只是那个 inet addr:..那一行而已，所以棉，利用 grep 与sed 来捉[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/Bcast.*$//g&#8217;[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/ Bcast.*$//g&#8217;#这两行命令差不多，但是第二行在Bacst前有个空格，一定要注意，说明连空格在内都去除了，可以使用#上面两行命令重向到两个文本文件中，例如1.txt 2.txt 仔细查看这两个文件的大小# 您可以将每个管线 (|) 的过程都分开来执行，就会晓得原因棉！# 去头去尾之后，就会得到我们所需要的 IP 亦即是 192.168.1.12 棉～ 范例七&#8758;将 /etc/man.config 档案的内容中，有 MAN 的设定就取出来，但不要说明内容。[root@linux ~]# cat /etc/man.config | grep &#8216;MAN&#8217;| sed &#8216;s/#.*$//g&#8217;|sed &#8216;/^$/d&#8217;# 每一行当中，若有 # 表示该行为注解，但是要注意的是，有时候，# 注解并不是写在第一个字元，亦即是写在某个指令后方，如底下的模样&#8758;# 『shutdown -h now # 这个是关机的指令』，注解 # 就在指令的后方了。# 因此，我们才会使用到将 #.*$ 这个正规表示法！ 范例八&#8758;利用 sed 直接在 ~/.bashrc 最后一行加入『# This is a test』[root@linux ~]# sed -i &#8216;$a # This is a test&#8217; ~/.bashrc# 上头的 -i 参数可以让你的 sed直接去修改后面接的档案内容喔！而不是由萤幕输出。# 至于那个 $a 则代表最后一行才新增的意思。 &lt;/p&gt;" />
<link rel="canonical" href="http://www.fireidea.com/archives/126" />
<meta property="og:url" content="http://www.fireidea.com/archives/126" />
<meta property="og:site_name" content="徐艺洲" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2011-04-18T14:22:16+08:00" />
<script type="application/ld+json">
{"description":"好东西窃走了！~&lt;/p&gt; 原文地址：linux sed命令作者：水境之 [root@linux ~]# sed [-nefr] [动作]参数&#8758;-n &#8758;使用安静(silent)模式。在一般 sed的用法中，所有来自 STDIN 的资料一般都会被列出到萤幕上。但如果加上 -n 参数后，则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。-e &#8758;直接在指令列模式上进行 sed 的动作编辑；-f &#8758;直接将 sed 的动作写在一个档案内， -f filename 则可以执行filename 内的 sed 动作；-r &#8758;sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)-i &#8758;直接修改读取的档案内容，而不是由萤幕输出。 动作说明&#8758; [n1[,n2]]functionn1, n2 &#8758;不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作 是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』 function 有底下这些咚咚&#8758;a &#8758;新增， a的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～c &#8758;取代， c 的后面可以接字串，这些字串可以取代n1,n2 之间的行！d &#8758;删除，因为是删除啊，所以 d后面通常不接任何咚咚；i &#8758;插入， i的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；p &#8758;列印，亦即将某个选择的资料印出。通常 p 会与参数sed -n 一起运作～s &#8758;取代，可以直接进行取代的工作哩！通常这个 s的动作可以搭配 正规表示法！例如 1,20s/old/new/g 就是啦！范例&#8758; 范例一&#8758;将 /etc/passwd 的内容列出，并且我需要列印行号，同时，请将第 2~5 行删除！[root@linux ~]# nl /etc/passwd | sed &#8216;2,5d&#8217; 1 root:x:0:0:root:/root:/bin/bash 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown&#8230;..(后面省略)&#8230;..# 看到了吧？因为 2-5 行给他删除了，所以显示的资料中，就没有 2-5行棉～# 另外，注意一下，原本应该是要下达 sed -e 才对，没有 -e 也行啦！# 同时也要注意的是， sed 后面接的动作，请务必以 &#8221; 两个单引号括住喔！# 而，如果只要删除第 2 行，可以使用 nl /etc/passwd | sed &#8216;2d&#8217; 来达成，# 至于第 3 到最后一行，则是 nl /etc/passwd | sed &#8216;3,$d&#8217; 的啦！ 范例二&#8758;承上题，在第二行后(亦即是加在第三行)加上『drink tea?』字样！[root@linux ~]# nl /etc/passwd | sed &#8216;2a drink tea&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologindrink tea 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 嘿嘿！在 a后面加上的字串就已将出现在第二行后面棉！那如果是要在第二行前呢？# nl /etc/passwd | sed &#8216;2i drink tea&#8217; 就对啦！ 范例三&#8758;在第二行后面加入两行字，例如『Drink tea or &#8230;..』『drink beer?』[root@linux ~]# nl /etc/passwd | sed &#8216;2a Drink tea or &#8230;&#8230;&gt; drink beer ?&#8217; 1 root:x:0:0:root:/root:/bin/bash 2 bin:x:1:1:bin:/bin:/sbin/nologinDrink tea or &#8230;&#8230;drink beer ? 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin# 这个范例的重点是，我们可以新增不只一行喔！可以新增好几行～# 但是每一行之间都必须要以反斜线 来进行新行的增加喔！所以，上面的例子中，# 我们可以发现在第一行的最后面就有 存在啦！那是一定要的喔！ 范例四&#8758;我想将第2-5行的内容取代成为『No 2-5 number』呢？[root@linux ~]# nl /etc/passwd | sed &#8216;2,5c No 2-5 number&#8217; 1 root:x:0:0:root:/root:/bin/bashNo 2-5 number 6 sync:x:5:0:sync:/sbin:/bin/sync# 没有了 2-5 行，嘿嘿嘿嘿！我们要的资料就出现啦！ 范例五&#8758;仅列出第 5-7 行[root@linux ~]# nl /etc/passwd | sed -n &#8216;5,7p&#8217; 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin 6 sync:x:5:0:sync:/sbin:/bin/sync 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown# 为什么要加 -n 的参数呢？您可以自行下达 sed &#8216;5,7p&#8217;就知道了！(5-7行会重复输出)# 有没有加上 -n 的参数时，输出的资料可是差很多的喔！ 范例六&#8758;我们可以使用 ifconfig 来列出 IP ，若仅要 eth0 的 IP 时？[root@linux ~]# ifconfig eth0eth0 Link encap:Ethernet HWaddr00:51:FD:52:9A:CA inet addr:192.168.1.12 Bcast:192.168.1.255 Mask:255.255.255.0 inet6 addr: fe80::250:fcff:fe22:9acb/64 Scope:Link UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1&#8230;..(以下省略)&#8230;..# 其实，我们要的只是那个 inet addr:..那一行而已，所以棉，利用 grep 与sed 来捉[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/Bcast.*$//g&#8217;[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/ Bcast.*$//g&#8217;#这两行命令差不多，但是第二行在Bacst前有个空格，一定要注意，说明连空格在内都去除了，可以使用#上面两行命令重向到两个文本文件中，例如1.txt 2.txt 仔细查看这两个文件的大小# 您可以将每个管线 (|) 的过程都分开来执行，就会晓得原因棉！# 去头去尾之后，就会得到我们所需要的 IP 亦即是 192.168.1.12 棉～ 范例七&#8758;将 /etc/man.config 档案的内容中，有 MAN 的设定就取出来，但不要说明内容。[root@linux ~]# cat /etc/man.config | grep &#8216;MAN&#8217;| sed &#8216;s/#.*$//g&#8217;|sed &#8216;/^$/d&#8217;# 每一行当中，若有 # 表示该行为注解，但是要注意的是，有时候，# 注解并不是写在第一个字元，亦即是写在某个指令后方，如底下的模样&#8758;# 『shutdown -h now # 这个是关机的指令』，注解 # 就在指令的后方了。# 因此，我们才会使用到将 #.*$ 这个正规表示法！ 范例八&#8758;利用 sed 直接在 ~/.bashrc 最后一行加入『# This is a test』[root@linux ~]# sed -i &#8216;$a # This is a test&#8217; ~/.bashrc# 上头的 -i 参数可以让你的 sed直接去修改后面接的档案内容喔！而不是由萤幕输出。# 至于那个 $a 则代表最后一行才新增的意思。 &lt;/p&gt;","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.fireidea.com/archives/126"},"@type":"BlogPosting","url":"http://www.fireidea.com/archives/126","headline":"[转载]linux sed命令","dateModified":"2011-04-18T14:22:16+08:00","datePublished":"2011-04-18T14:22:16+08:00","author":{"@type":"Person","name":"徐艺洲"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://www.fireidea.com/feed.xml" title="徐艺洲" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">徐艺洲</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/aboutme.html">关于我</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">[转载]linux sed命令</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2011-04-18T14:22:16+08:00" itemprop="datePublished">Apr 18, 2011
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">徐艺洲</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="sina_keyword_ad_area2" class="articalContent   ">
  好东西窃走了！~&lt;/p&gt; 
  
  <div class="blogzz_abstract borderc" style="padding-top:15px;margin:20px 0; border:none; border-top:1px dotted #ccc;">
    <div class="blogzz_ainfo" style="margin-bottom:12px;">
      <span style="margin-right:25px;"><strong>原文地址：</strong><a target="_blank" href="http://blog.sina.com.cn/s/blog_6238358c0100hb0z.html" title="linux sed命令">linux sed命令</a></span><span><strong>作者：</strong><a href="http://blog.sina.com.cn/u/1647850892" title="水境之" target="_blank">水境之</a></span>
    </div>
    
    <div class="blogzz_acon">
      <p>
        [root@linux ~]# sed [-nefr] [动作]<br />参数&#8758;<br /><font COLOR="#FF7E00">-n &#8758;使用安静(silent)模式。在一般 sed的用法中，所有来自 STDIN<br /> 的资料一般都会被列出到萤幕上。但如果加上 -n 参数后，则只有经过<br /> sed 特殊处理的那一行(或者动作)才会被列出来。<br />-e &#8758;直接在指令列模式上进行 sed 的动作编辑；<br />-f &#8758;直接将 sed 的动作写在一个档案内， -f filename 则可以执行filename 内的<br /> sed 动作；<br />-r &#8758;sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)<br />-i &#8758;直接修改读取的档案内容，而不是由萤幕输出。</font>
      </p>
      
      <p>
        <font COLOR="#FF7E00">动作说明&#8758; [n1[,n2]]function<br />n1, n2 &#8758;不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作<br /> 是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』</font>
      </p>
      
      <p>
        <font COLOR="#FF7E00">function 有底下这些咚咚&#8758;<br />a &#8758;新增， a的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～<br />c &#8758;取代， c 的后面可以接字串，这些字串可以取代n1,n2 之间的行！<br />d &#8758;删除，因为是删除啊，所以 d后面通常不接任何咚咚；<br />i &#8758;插入， i的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；<br />p &#8758;列印，亦即将某个选择的资料印出。通常 p 会与参数sed -n 一起运作～<br />s &#8758;取代，可以直接进行取代的工作哩！通常这个 s的动作可以搭配<br /> 正规表示法！例如 1,20s/old/new/g 就是啦！</font><br />范例&#8758;
      </p>
      
      <p>
        范例一&#8758;将 /etc/passwd 的内容列出，并且我需要列印行号，同时，请将第 2~5 行删除！<br />[root@linux ~]# nl /etc/passwd | sed &#8216;2,5d&#8217;<br /> 1 root:x:0:0:root:/root:/bin/bash<br /> 6 sync:x:5:0:sync:/sbin:/bin/sync<br /> 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<br />&#8230;..(后面省略)&#8230;..<br /><font COLOR="#FF7E00"># 看到了吧？因为 2-5 行给他删除了，所以显示的资料中，就没有 2-5行棉～<br /># 另外，注意一下，原本应该是要下达 sed -e 才对，没有 -e 也行啦！<br /># 同时也要注意的是， sed 后面接的动作，请务必以 &#8221; 两个单引号括住喔！<br /># 而，如果只要删除第 2 行，可以使用 nl /etc/passwd | sed &#8216;2d&#8217; 来达成，<br /># 至于第 3 到最后一行，则是 nl /etc/passwd | sed &#8216;3,$d&#8217; 的啦！</font>
      </p>
      
      <p>
        范例二&#8758;承上题，在第二行后(亦即是加在第三行)加上『drink tea?』字样！<br />[root@linux ~]# nl /etc/passwd | sed &#8216;2a drink tea&#8217;<br /> 1 root:x:0:0:root:/root:/bin/bash<br /> 2 bin:x:1:1:bin:/bin:/sbin/nologin<br />drink tea<br /> 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin<br /><font COLOR="#FF7E00"># 嘿嘿！在 a后面加上的字串就已将出现在第二行后面棉！那如果是要在第二行前呢？<br /># nl /etc/passwd | sed &#8216;2i drink tea&#8217; 就对啦！</font>
      </p>
      
      <p>
        范例三&#8758;在第二行后面加入两行字，例如『Drink tea or &#8230;..』『drink beer?』<br />[root@linux ~]# nl /etc/passwd | sed &#8216;2a Drink tea or &#8230;&#8230;<br />&gt; drink beer ?&#8217;<br /> 1 root:x:0:0:root:/root:/bin/bash<br /> 2 bin:x:1:1:bin:/bin:/sbin/nologin<br />Drink tea or &#8230;&#8230;<br />drink beer ?<br /> 3 daemon:x:2:2:daemon:/sbin:/sbin/nologin<br /><font COLOR="#FF7E00"># 这个范例的重点是，我们可以新增不只一行喔！可以新增好几行～<br /># 但是每一行之间都必须要以反斜线 来进行新行的增加喔！所以，上面的例子中，<br /># 我们可以发现在第一行的最后面就有 存在啦！那是一定要的喔！</font>
      </p>
      
      <p>
        范例四&#8758;我想将第2-5行的内容取代成为『No 2-5 number』呢？<br />[root@linux ~]# nl /etc/passwd | sed &#8216;2,5c No 2-5 number&#8217;<br /> 1 root:x:0:0:root:/root:/bin/bash<br />No 2-5 number<br /> 6 sync:x:5:0:sync:/sbin:/bin/sync<br /><font COLOR="#FF7E00"># 没有了 2-5 行，嘿嘿嘿嘿！我们要的资料就出现啦！</font>
      </p>
      
      <p>
        范例五&#8758;仅列出第 5-7 行<br />[root@linux ~]# nl /etc/passwd | sed -n &#8216;5,7p&#8217;<br /> 5 lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin<br /> 6 sync:x:5:0:sync:/sbin:/bin/sync<br /> 7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<br /><font COLOR="#FF7E00"># 为什么要加 -n 的参数呢？您可以自行下达 sed &#8216;5,7p&#8217;就知道了！(5-7行会重复输出)<br /># 有没有加上 -n 的参数时，输出的资料可是差很多的喔！</font>
      </p>
      
      <p>
        范例六&#8758;我们可以使用 ifconfig 来列出 IP ，若仅要 eth0 的 IP 时？<br />[root@linux ~]# ifconfig eth0<br />eth0 Link encap:Ethernet HWaddr00:51:FD:52:9A:CA<br /> inet addr:192.168.1.12 Bcast:192.168.1.255 Mask:255.255.255.0<br /> inet6 addr: fe80::250:fcff:fe22:9acb/64 Scope:Link<br /> UP BROADCAST RUNNING MULTICAST MTU:1500 Metric:1<br />&#8230;..(以下省略)&#8230;..<br /><font COLOR="#FF7E00"># 其实，我们要的只是那个 inet addr:..那一行而已，所以棉，利用 grep 与sed 来捉<br /></font>[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/Bcast.*$//g&#8217;<br />[root@linux ~]# ifconfig eth0 | grep &#8216;inet &#8216;|sed&#8217;s/^.*addr://g&#8217;|sed &#8216;s/ Bcast.*$//g&#8217;<br /><font COLOR="#FF7E00">#这两行命令差不多，但是第二行在Bacst前有个空格，一定要注意，说明连空格在内都去除了，可以使用<br />#上面两行命令重向到两个文本文件中，例如1.txt 2.txt 仔细查看这两个文件的大小<br /># 您可以将每个管线 (|) 的过程都分开来执行，就会晓得原因棉！<br /># 去头去尾之后，就会得到我们所需要的 IP 亦即是 192.168.1.12 棉～</font>
      </p>
      
      <p>
        范例七&#8758;将 /etc/man.config 档案的内容中，有 MAN 的设定就取出来，但不要说明内容。<br />[root@linux ~]# cat /etc/man.config | grep &#8216;MAN&#8217;| sed &#8216;s/#.*$//g&#8217;|sed &#8216;/^$/d&#8217;<br /><font COLOR="#FF7E00"># 每一行当中，若有 # 表示该行为注解，但是要注意的是，有时候，<br /># 注解并不是写在第一个字元，亦即是写在某个指令后方，如底下的模样&#8758;<br /># 『shutdown -h now # 这个是关机的指令』，注解 # 就在指令的后方了。<br /># 因此，我们才会使用到将 #.*$ 这个正规表示法！</font>
      </p>
      
      <p>
        范例八&#8758;利用 sed 直接在 ~/.bashrc 最后一行加入『# This is a test』<br />[root@linux ~]# sed -i &#8216;$a # This is a test&#8217; ~/.bashrc<br /><font COLOR="#FF7E00"># 上头的 -i 参数可以让你的 sed直接去修改后面接的档案内容喔！而不是由萤幕输出。<br /># 至于那个 $a 则代表最后一行才新增的意思。</font>
      </p>&lt;/p&gt;
    </div>
  </div>
</div>

  </div><a class="u-url" href="/archives/126" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col one-half">
      <h2 class="footer-heading">徐艺洲</h2>
        <ul class="contact-list">
          <li class="p-name"></li></ul>
      </div>

      <div class="footer-col one-half">
        <p>知止定静安虑得</p>
      </div>

      <div class="social-links"><ul class="social-media-list"></ul>
</div>
    </div>

  </div>

</footer>
</body>

</html>
